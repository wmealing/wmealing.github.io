<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2025-10-07 Tue 16:12 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Consuming eunit surefire xml reports.</title>
<meta name="generator" content="Org Mode" />
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta http-equiv="Content-Security-Policy" content="style-src-elem 'self' https://wmealing.github.io;">
<link rel="stylesheet" href="index.css">
<meta name="author" content="Wade Mealing" />
<meta name="description" content="rebar3 erlang eunit surefire report" />
</head>
<body>
<div id="content" class="content">
<h1 class="title">Consuming eunit surefire xml reports.</h1>
<div id="outline-container-orgf575645" class="outline-2">
<h2 id="orgf575645">Introduction</h2>
<div class="outline-text-2" id="text-orgf575645">
<p>
Eunit outputs test results on the command line, there is an eunit plugin to
generate 'surefire' style xml output.  This can be consumed by the 'surefire-reports'
maven/mvn tool to generate HTML which might be a little bit more consumable for
some people.
</p>
</div>
</div>
<div id="outline-container-org3463c6e" class="outline-2">
<h2 id="org3463c6e">Basic configuration:</h2>
<div class="outline-text-2" id="text-org3463c6e">
<p>
Edit rebar.config in your projects rebar.config and add the "eunit_opts" option as shown below.
</p>

<pre class="example" id="org3835ae2">
{erl_opts, [debug_info]}.
{deps, []}.

%% add this line
{eunit_opts, [verbose, {report, {eunit_surefire, [{dir, "target/surefire-reports"}]}}]}.

{shell, [
    %% {config, "config/sys.config"},
    {apps, [surefire_demo]}
]}.
</pre>


<p>
When you run eunit tests (In this case, with 'rebar3 eunit' command), it should create the target/surefire-reports
directory and create XML files, the exact count depending on your project structure and test structures.
</p>

<p>
At this point you have completed the 'erlang' side of the test tooling. The next step is to configure the 'maven/java'
tooling.
</p>


<p>
Create a pom.xml file in the projects root directory.
</p>


<div class="org-src-container">
<pre class="src src-xml">&lt;<span style="font-weight: bold;">project</span>&gt;
        &lt;<span style="font-weight: bold;">modelVersion</span>&gt;4.0.0&lt;/<span style="font-weight: bold;">modelVersion</span>&gt;
        &lt;<span style="font-weight: bold;">groupId</span>&gt; 1 &lt;/<span style="font-weight: bold;">groupId</span>&gt;
        &lt;<span style="font-weight: bold;">artifactId</span>&gt;ProjectName&lt;/<span style="font-weight: bold;">artifactId</span>&gt;
        &lt;<span style="font-weight: bold;">version</span>&gt; 1 &lt;/<span style="font-weight: bold;">version</span>&gt;
        &lt;<span style="font-weight: bold;">properties</span>&gt;
                &lt;<span style="font-weight: bold;">project.build.sourceEncoding</span>&gt;UTF-8&lt;/<span style="font-weight: bold;">project.build.sourceEncoding</span>&gt;
        &lt;/<span style="font-weight: bold;">properties</span>&gt;
        &lt;<span style="font-weight: bold;">url</span>&gt;https://wmealing.github.io&lt;/<span style="font-weight: bold;">url</span>&gt;
        &lt;<span style="font-weight: bold;">reporting</span>&gt;
                &lt;<span style="font-weight: bold;">plugins</span>&gt;
                        &lt;<span style="font-weight: bold;">plugin</span>&gt;
                                &lt;<span style="font-weight: bold;">groupId</span>&gt;org.apache.maven.plugins&lt;/<span style="font-weight: bold;">groupId</span>&gt;
                                &lt;<span style="font-weight: bold;">artifactId</span>&gt;maven-project-info-reports-plugin&lt;/<span style="font-weight: bold;">artifactId</span>&gt;
                                &lt;<span style="font-weight: bold;">version</span>&gt;3.1.2&lt;/<span style="font-weight: bold;">version</span>&gt;
                                <span style="font-weight: bold; font-style: italic;">&lt;!-- </span><span style="font-weight: bold; font-style: italic;">Replace with a suitable version</span><span style="font-weight: bold; font-style: italic;"> --&gt;</span>
                        &lt;/<span style="font-weight: bold;">plugin</span>&gt;
                &lt;/<span style="font-weight: bold;">plugins</span>&gt;
        &lt;/<span style="font-weight: bold;">reporting</span>&gt;
        &lt;<span style="font-weight: bold;">build</span>&gt;
                &lt;<span style="font-weight: bold;">plugins</span>&gt;
                        &lt;<span style="font-weight: bold;">plugin</span>&gt;
                                &lt;<span style="font-weight: bold;">groupId</span>&gt;org.apache.maven.plugins&lt;/<span style="font-weight: bold;">groupId</span>&gt;
                                &lt;<span style="font-weight: bold;">artifactId</span>&gt;maven-surefire-plugin&lt;/<span style="font-weight: bold;">artifactId</span>&gt;
                                &lt;<span style="font-weight: bold;">version</span>&gt;3.5.4&lt;/<span style="font-weight: bold;">version</span>&gt;
                                &lt;<span style="font-weight: bold;">configuration</span>&gt;
                                        &lt;<span style="font-weight: bold;">testFailureIgnore</span>&gt;true&lt;/<span style="font-weight: bold;">testFailureIgnore</span>&gt;
                                        &lt;<span style="font-weight: bold;">linkXRef</span>&gt;false&lt;/<span style="font-weight: bold;">linkXRef</span>&gt;
                                &lt;/<span style="font-weight: bold;">configuration</span>&gt;
                        &lt;/<span style="font-weight: bold;">plugin</span>&gt;
                        <span style="font-weight: bold; font-style: italic;">&lt;!--
                            </span><span style="font-weight: bold; font-style: italic;">Convert .xml reports into .html report, but without the CSS or images.
                            equivalent: mvn surefire-report:report-only</span><span style="font-weight: bold; font-style: italic;">
                        --&gt;</span>
                        &lt;<span style="font-weight: bold;">plugin</span>&gt;
                                &lt;<span style="font-weight: bold;">groupId</span>&gt;org.apache.maven.plugins&lt;/<span style="font-weight: bold;">groupId</span>&gt;
                                &lt;<span style="font-weight: bold;">artifactId</span>&gt;maven-surefire-report-plugin&lt;/<span style="font-weight: bold;">artifactId</span>&gt;
                                &lt;<span style="font-weight: bold;">version</span>&gt;3.5.4&lt;/<span style="font-weight: bold;">version</span>&gt;
                                &lt;<span style="font-weight: bold;">executions</span>&gt;
                                        &lt;<span style="font-weight: bold;">execution</span>&gt;
                                                &lt;<span style="font-weight: bold;">phase</span>&gt;test&lt;/<span style="font-weight: bold;">phase</span>&gt;
                                                &lt;<span style="font-weight: bold;">goals</span>&gt;
                                                        &lt;<span style="font-weight: bold;">goal</span>&gt;report-only&lt;/<span style="font-weight: bold;">goal</span>&gt;
                                                &lt;/<span style="font-weight: bold;">goals</span>&gt;
                                        &lt;/<span style="font-weight: bold;">execution</span>&gt;
                                &lt;/<span style="font-weight: bold;">executions</span>&gt;
                        &lt;/<span style="font-weight: bold;">plugin</span>&gt;
                &lt;/<span style="font-weight: bold;">plugins</span>&gt;
        &lt;/<span style="font-weight: bold;">build</span>&gt;
&lt;/<span style="font-weight: bold;">project</span>&gt;

</pre>
</div>
</div>
</div>
<div id="outline-container-org4f1bb42" class="outline-2">
<h2 id="org4f1bb42">Summary:</h2>
<div class="outline-text-2" id="text-org4f1bb42">
<p>
REPLACE THIS
</p>
</div>
</div>
<div id="outline-container-org4130de7" class="outline-2">
<h2 id="org4130de7">Conclusion</h2>
<div class="outline-text-2" id="text-org4130de7">
<p>
Wrap it up here.
</p>
</div>
</div>
<div id="outline-container-org63b1f58" class="outline-2">
<h2 id="org63b1f58">Resources:</h2>
</div>
</div>
</body>
</html>
